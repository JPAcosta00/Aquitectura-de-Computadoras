PIC EQU 20h
HAND EQU 40h
N_HAND EQU 10

ORG 40h
IP_HAND DW RUT_HAND

ORG 1000h
MSJ DB "INGRESE UN CARACTER"
TER DB  ?

ORG 1500h
CHAR DB ?

ORG 2000h
MOV CL,5
MOV DL,5
MOV BX,OFFSET MSJ
MOV AL,OFFSET TER-OFFSET MSJ
INT 7
REPITE: MOV BX,OFFSET CHAR
INT 6
DEC DL
JNZ REPITE
CLI
MOV AL,11111011b
OUT PIC+1,AL                              ;IMR=INT 2
MOV AL,N_HAND
OUT PIC+6,AL                             ;INT 2=N_HAND
MOV AL,07Fh
OUT HAND+1,AL                       ;CONFIGURA PARA INTERRUPCION
STI
MOV AL,[BX]
MOV DL,0
LAZO:DEC CL
INC DL
CMP DL,5
JZ TERMINA
JMP LAZO
TERMINA:MOV AL,HAND+1
AND AL,07Fh
OUT HAND+1,AL
INT 0

ORG 3000h
RUT_HAND: PUSH AX
OUT HAND,AL
CMP CL,0
JNZ SI
CMP DL,5
JNZ ZI
SI:INC BX
JMP FIN
ZI:DEC BX
FIN:POP AX
MOV AL,20h
OUT PIC,AL
IRET
END
